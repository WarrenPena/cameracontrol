<!DOCTYPE HTML>
<html>
	<head>
		<title>Cameras</title>
		<script src="jquery-1.6.2.js"></script>
		<script src="presets.js"></script>
		<script src="movebystep.js"></script>

		<link rel="stylesheet" type="text/css" href="cameras.css" />
		<link rel="stylesheet" type="text/css" href="font-awesome-4.3.0/css/font-awesome.min.css">
	</head>

	<body>
		<div>
			<h2 class="darkaccent">Back</h2>
			<div camera="1">
				<div class="vid">
					<img src="http://10.0.5.5/mjpg/video.mjpg">
				</div>
				<div class="btnControlGroup">
					<br>
					<div id="arrowGroup" class="btnGroup">
						<button class="btn moveButton" camera="back" direction="upleft"><span class="fa fa-chevron-up"></span></button>
						<button class="btn moveButton" camera="back" direction="up"><span class="fa fa-chevron-up"></span></button>
						<button class="btn moveButton" camera="back" direction="upright"><span class="fa fa-chevron-up"></span></button>
						<button class="btn moveButton" camera="back" direction="left"><span class="fa fa-chevron-left"></span></button>
						<span class="btn spacerBtn"></span>
						<button class="btn moveButton" camera="back" direction="right"><span class="fa fa-chevron-right"></span></button>
						<button class="btn moveButton" camera="back" direction="downleft"><span class="fa fa-chevron-up"></span></button>
						<button class="btn moveButton" camera="back" direction="down"><span class="fa fa-chevron-down"></span></button>
						<button class="btn moveButton" camera="back" direction="downright"><span class="fa fa-chevron-up"></span></button>
					</div>
					<br>
					<div class="btnGroup">
						<button class="btn zoomButton" camera="back" direction="500"><span class="fa fa-search-plus"></span></button>
						<button class="btn zoomButton" camera="back" direction="-500"><span class="fa fa-search-minus"></span></button>
						<span class="btn spacerBtn doNothingButton"></span>
						<button class="btn irisButton" camera="1" direction="open">Iris Open</button>
						<button class="btn irisButton" camera="1" direction="close">Iris Close</button>
					</div>
				</div>
				<div class="presets" camera="1">
					<div class="divPresetsList" camera="1"></div>
					<div class="btnGroup">
						<button camera="1" class="btn presetGoButton">Go</button>
						<button camera="1" class="btn presetNewButton">+</button>
						<button camera="1" class="btn presetDeleteButton">-</button>
					</div>
				</div>
			</div>
		</div>
		<div style="clear:both;padding-top:5px">
			<h2 class="darkaccent">Left</h2>
			<div camera="2">
				<div class="vid">
					<img src="http://10.0.5.6/mjpg/video.mjpg">
				</div>
				<div class="btnControlGroup"><br>
					<div id="arrowGroup" class="btnGroup">
						<button class="btn moveButton" camera="back" direction="upleft"><span class="fa fa-chevron-up"></span></button>
						<button class="btn moveButton" camera="back" direction="up"><span class="fa fa-chevron-up"></span></button>
						<button class="btn moveButton" camera="back" direction="upright"><span class="fa fa-chevron-up"></span></button>
						<button class="btn moveButton" camera="back" direction="left"><span class="fa fa-chevron-left"></span></button>
						<span class="btn spacerBtn"></span>
						<button class="btn moveButton" camera="back" direction="right"><span class="fa fa-chevron-right"></span></button>
						<button class="btn moveButton" camera="back" direction="downleft"><span class="fa fa-chevron-up"></span></button>
						<button class="btn moveButton" camera="back" direction="down"><span class="fa fa-chevron-down"></span></button>
						<button class="btn moveButton" camera="back" direction="downright"><span class="fa fa-chevron-up"></span></button>
					</div>

					<br>

					<div class="btnGroup">
						<button class="btn zoomButton" camera="left" direction="500"><span class="fa fa-search-plus"></span></button>
						<button class="btn zoomButton" camera="left" direction="-500"><span class="fa fa-search-minus"></span></button>
						<span class="btn spacerBtn doNothingButton"></span>
						<button class="btn irisButton" camera="2" direction="open">Iris Open</button>
						<button class="btn irisButton" camera="2" direction="close">Iris Close</button>
					</div>
				</div>

				<div class="presets" camera="1">
					<div class="divPresetsList" camera="2"></div>
					<div class="btnGroup">
						<button camera="2" class="btn presetGoButton">Go</button>
						<button camera="2" class="btn presetNewButton">+</button>
						<button camera="2" class="btn presetDeleteButton">-</button>
					</div>
				</div>
			</div>
		</div>

		<div style='clear:both'>
			<br>
			<hr>
			<div id='divLive'>
			</div>
		</div>

		<script type="text/javascript">
			$(document).ready( function() {
				//Set up event handlers..
				//...for move/zoom/iris
				$(".moveButton").click(moveButtonClick);
				$(".zoomButton").click(zoomButtonClick);
				$(".irisButton").click(changeIris);

				//...for presets
				presetsLoadAll();
				$(".presetGoButton").click(presetsGo);
				$(".presetBtn").dblclick(presetsGo);
				$(".presetNewButton").click(presetsNew);
				$(".presetDeleteButton").click(presetsDelete);

				// Set up Sunday Streams Preview
				if (document.createElement('video').canPlayType('application/vnd.apple.mpegURL') != '') {
					//HTML 5 enabled
					var video = $("<video></video>").attr("controls", "controls").attr("autoplay", "autoplay").attr("width", "320").attr("height", "240");
					var source = $("<source></source>").attr("src", "http://i4.netformzcdn.com:1935/SUNS2338TEBJUMsYUmyh/SUNS_2338TEBJUMsYUmyh.sdp/playlist.m3u8").appendTo(video);
					$("#divLive").append(video);
					  //<source src="http://HttpLiveStream.m3u8">
				}
				else {
					$("<iframe></iframe>").attr("width", "640").attr("height", "580").attr("src", "http://www.sundaystreams.com/embed/v2/2338/59753887/1/&w=640&h=580&pp=1&pwh=220").attr("frameborder", "0").appendTo("#divLive");
					$("#divLive").css("max-height", "360px").css("max-width","640px").css("overflow", "hidden");
				}
			});

			/* Motion */
			function moveButtonClick() {
				var camera = $(this).attr("camera");
				var direction = $(this).attr("direction");

				// Translate the camera in to an IP address
				var cameraip = cameraNameToIp(camera);

				// Run the command
				$.ajax({
					url: "http://" + cameraip + "/axis-cgi/com/ptz.cgi",
					data: { "move": direction }
				});
			}

			/* Zoom */
			function zoomButtonClick() {
				var camera = $(this).attr("camera");
				var direction = $(this).attr("direction");

				// Translate the camera in to an IP address
				var cameraip = cameraNameToIp(camera);

				// Run the command
				$.ajax({
					url: "http://" + cameraip + "/axis-cgi/com/ptz.cgi",
					data: { "rzoom": direction }
				});
			}

			/* Convert camera names to IP Addr. */
			function cameraNameToIp(name) {
				var ip;

				switch (name) {
					case "back":
						ip = "10.0.5.5";
						break;

					case "left":
						ip = "10.0.5.6";
						break;

					default:
						alert("Unrecognized camera " + name);
						ip = "0.0.0.0";
						break;
				}

				return ip;
			}
		</script>
	</body>
</html>
